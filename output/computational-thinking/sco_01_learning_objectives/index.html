<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>الأهداف التعليمية | التفكير الحاسوبي</title>

  <!-- Layered CSS: base -> theme -> decorations -->
  <link rel="stylesheet" href="../shared/base.css">
  <link rel="stylesheet" href="../shared/theme.css">
  <link rel="stylesheet" href="../shared/decorations.css">

  <style>
    /* ===== SCO 01: Course-specific styles ===== */

    /* Allow scrollable infographic layout for this SCO */
    body { overflow-y: auto; }
    .sco-container { height: auto; min-height: 100vh; overflow: visible; }
    .sco-content { overflow: visible; }

    /* Hero boot sequence */
    .boot-text {
      font-family: var(--font-mono);
      font-size: var(--font-size-small);
      color: var(--color-accent);
      margin-bottom: var(--space-xs);
      opacity: 0;
      animation: fadeIn 0.3s ease forwards;
    }
    .boot-text:nth-child(1) { animation-delay: 0.2s; }
    .boot-text:nth-child(2) { animation-delay: 0.6s; }
    .boot-text:nth-child(3) { animation-delay: 1.0s; }
    .boot-text:nth-child(4) { animation-delay: 1.4s; }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .hero-title {
      font-size: var(--font-size-display);
      margin-top: var(--space-lg);
      margin-bottom: var(--space-sm);
    }

    .hero-subtitle {
      font-size: var(--font-size-h3);
      color: var(--color-text-secondary);
      margin-bottom: var(--space-2xl);
    }

    /* Objective cards grid */
    .objectives-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-lg);
      max-width: var(--max-content-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
    }

    @media (max-width: 768px) {
      .objectives-grid { grid-template-columns: 1fr; }
    }

    .objective-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      position: relative;
      overflow: hidden;
      transition: border-color var(--transition-base);
      cursor: pointer;
    }

    .objective-card:hover,
    .objective-card:focus-within {
      border-color: var(--color-border-highlight);
    }

    .objective-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 4px;
      height: 100%;
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
    }

    /* Per-card accent colors based on module grouping */
    .objective-card[data-color="cyan"]::before { background: var(--syntax-keyword); }
    .objective-card[data-color="green"]::before { background: var(--syntax-string); }
    .objective-card[data-color="orange"]::before { background: var(--syntax-function); }
    .objective-card[data-color="violet"]::before { background: var(--syntax-type); }

    .objective-card[data-color="cyan"]:hover { box-shadow: var(--glow-primary); }
    .objective-card[data-color="green"]:hover { box-shadow: var(--glow-accent); }
    .objective-card[data-color="orange"]:hover { box-shadow: 0 0 20px rgba(245, 158, 11, 0.15), 0 0 4px rgba(245, 158, 11, 0.3); }
    .objective-card[data-color="violet"]:hover { box-shadow: var(--glow-secondary); }

    .obj-header {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      margin-bottom: var(--space-md);
    }

    .obj-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .obj-icon svg {
      width: 28px;
      height: 28px;
    }

    .obj-icon[data-color="cyan"]  { background: rgba(34, 211, 238, 0.12); color: var(--syntax-keyword); }
    .obj-icon[data-color="green"] { background: rgba(52, 211, 153, 0.12); color: var(--syntax-string); }
    .obj-icon[data-color="orange"]{ background: rgba(245, 158, 11, 0.12); color: var(--syntax-function); }
    .obj-icon[data-color="violet"]{ background: rgba(167, 139, 250, 0.12); color: var(--syntax-type); }

    .obj-number {
      font-family: var(--font-mono);
      font-size: var(--font-size-overline);
      font-weight: 700;
      letter-spacing: var(--letter-spacing-overline);
      text-transform: uppercase;
    }

    .obj-number[data-color="cyan"]  { color: var(--syntax-keyword); }
    .obj-number[data-color="green"] { color: var(--syntax-string); }
    .obj-number[data-color="orange"]{ color: var(--syntax-function); }
    .obj-number[data-color="violet"]{ color: var(--syntax-type); }

    .obj-title {
      font-size: var(--font-size-h3);
      font-weight: 600;
      margin-bottom: var(--space-sm);
      line-height: 1.5;
    }

    .obj-description {
      font-size: var(--font-size-body-ar);
      color: var(--color-text-secondary);
      line-height: var(--line-height-body-ar);
      margin-bottom: var(--space-md);
    }

    .blooms-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      font-family: var(--font-mono);
      font-size: var(--font-size-overline);
      font-weight: 700;
      letter-spacing: 0.05em;
      padding: 4px 10px;
      border-radius: var(--radius-sm);
      background: var(--color-surface-elevated);
      border: 1px solid var(--color-border);
      color: var(--color-text-muted);
      text-transform: uppercase;
    }

    .en-term {
      direction: ltr;
      unicode-bidi: isolate;
      font-family: var(--font-mono);
      color: var(--color-primary);
      font-size: 0.9em;
    }

    /* Detail reveal */
    .obj-detail {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.35s var(--ease-snappy), opacity 0.25s ease;
      opacity: 0;
      margin-top: 0;
    }

    .obj-detail.visible {
      max-height: 300px;
      opacity: 1;
      margin-top: var(--space-md);
    }

    .obj-detail-content {
      padding: var(--space-md);
      background: var(--color-surface-elevated);
      border-radius: var(--radius-sm);
      border: 1px solid var(--color-border);
      font-size: var(--font-size-body-ar);
      line-height: var(--line-height-body-ar);
      color: var(--color-text-secondary);
    }

    .reveal-btn {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      background: none;
      border: none;
      color: var(--color-primary);
      font-family: var(--font-mono);
      font-size: var(--font-size-caption);
      cursor: pointer;
      padding: var(--space-xs) 0;
      transition: color var(--transition-fast);
    }

    .reveal-btn:hover { color: var(--color-primary-light); }

    .reveal-btn .arrow {
      display: inline-block;
      transition: transform 0.2s ease;
    }

    .reveal-btn[aria-expanded="true"] .arrow {
      transform: rotate(90deg);
    }

    /* Recall section */
    .recall-section {
      max-width: var(--max-content-width);
      margin: var(--space-3xl) auto var(--space-2xl);
      padding: 0 var(--space-lg);
      text-align: center;
    }

    .recall-text {
      font-size: var(--font-size-h3);
      color: var(--color-text-secondary);
      line-height: var(--line-height-body-ar);
      max-width: 700px;
      margin: 0 auto;
    }

    /* Footer navigation hint */
    .next-hint {
      text-align: center;
      padding: var(--space-2xl) var(--space-lg);
      border-top: 1px solid var(--color-border);
      margin-top: var(--space-3xl);
    }

    .next-hint p {
      color: var(--color-text-muted);
      font-size: var(--font-size-caption);
      font-family: var(--font-mono);
    }

    /* Completion timer indicator */
    .timer-indicator {
      position: fixed;
      bottom: var(--space-lg);
      left: var(--space-lg);
      font-family: var(--font-mono);
      font-size: var(--font-size-caption);
      color: var(--color-text-muted);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      padding: var(--space-xs) var(--space-sm);
      z-index: 100;
      transition: opacity 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }

    .timer-indicator.complete {
      color: var(--color-success);
      border-color: var(--color-success);
    }

    /* Connecting lines between objectives (visual) */
    .connection-label {
      text-align: center;
      padding: var(--space-md) 0;
      font-family: var(--font-mono);
      font-size: var(--font-size-caption);
      color: var(--color-text-muted);
    }

    .connection-label .line {
      display: block;
      width: 1px;
      height: 24px;
      background: var(--color-border-highlight);
      margin: var(--space-xs) auto;
    }

    /* Hero section inner */
    .hero-inner {
      max-width: var(--max-content-width);
      margin: 0 auto;
      padding: var(--space-3xl) var(--space-lg) var(--space-2xl);
    }

    @media (prefers-reduced-motion: reduce) {
      .boot-text { opacity: 1; animation: none; }
    }
  </style>
</head>
<body>

  <!-- Skip Navigation -->
  <a href="#main-content" class="skip-nav">تخطي إلى المحتوى الرئيسي</a>

  <div class="sco-container">

    <!-- Header with progress -->
    <header class="nav-bar" role="banner">
      <span class="course-title">التفكير الحاسوبي — الوحدة الأولى</span>
      <div class="progress-bar" style="flex: 1; margin: 0 var(--space-lg); max-width: 200px;">
        <div class="progress-fill" id="progress" style="width: 0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <span class="page-indicator" dir="ltr">SCO 01 / 18</span>
    </header>

    <!-- Main Content -->
    <main class="sco-content" id="main-content" role="main">

      <!-- HERO: Boot Sequence + Title -->
      <section class="hero-section circuit-corners has-grain" aria-label="مقدمة الأهداف التعليمية">
        <div class="hero-inner">
          <div class="boot-text" aria-hidden="true" dir="ltr">$ loading computational-thinking v1.0...</div>
          <div class="boot-text" aria-hidden="true" dir="ltr">$ initializing chapter_01.objectives...</div>
          <div class="boot-text" aria-hidden="true" dir="ltr">$ compiling 4 terminal objectives...</div>
          <div class="boot-text" aria-hidden="true" dir="ltr">$ <span style="color: var(--color-success);">ready.</span></div>

          <h1 class="hero-title stagger-item">الأهداف التعليمية</h1>
          <p class="hero-subtitle stagger-item">
            بنهاية هذه الوحدة، ستكون قادرًا على تحقيق الأهداف التالية
            <br>
            <span class="en-term">Chapter 1: Computational Thinking — Terminal Objectives</span>
          </p>
        </div>
      </section>

      <!-- OBJECTIVES GRID -->
      <section class="objectives-grid" aria-label="الأهداف التعليمية الأربعة">

        <!-- Objective 1: Apply CT Principles -->
        <article class="objective-card stagger-item" data-color="cyan" tabindex="0"
                 aria-label="الهدف الأول: تطبيق مبادئ التفكير الحاسوبي">
          <div class="obj-header">
            <div class="obj-icon" data-color="cyan">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" role="img" aria-label="أيقونة التحليل">
                <rect x="3" y="3" width="7" height="7" rx="1"/>
                <rect x="14" y="3" width="7" height="7" rx="1"/>
                <rect x="3" y="14" width="7" height="7" rx="1"/>
                <rect x="14" y="14" width="7" height="7" rx="1"/>
              </svg>
            </div>
            <div>
              <div class="obj-number" data-color="cyan" dir="ltr">// TO-01</div>
              <span class="blooms-badge"><span dir="ltr">Apply</span> — تطبيق</span>
            </div>
          </div>
          <h2 class="obj-title">تطبيق مبادئ التفكير الحاسوبي لتحليل المسائل المعقدة</h2>
          <p class="obj-description">
            استخدام الأركان الأربعة — التجزئة <span class="en-term">(Decomposition)</span>،
            التعرف على الأنماط <span class="en-term">(Pattern Recognition)</span>،
            التجريد <span class="en-term">(Abstraction)</span>،
            والتفكير الخوارزمي <span class="en-term">(Algorithmic Thinking)</span>
            — لتحليل المشكلات المعقدة إلى أجزاء يمكن حلها.
          </p>
          <button class="reveal-btn" aria-expanded="false" onclick="toggleDetail(this)">
            <span class="arrow" aria-hidden="true">&#9654;</span>
            المزيد من التفاصيل
          </button>
          <div class="obj-detail">
            <div class="obj-detail-content">
              ستتعلم كيف تقسم مشكلة كبيرة مثل تنظيم 10,000 كتاب في مكتبة إلى خطوات صغيرة قابلة للتنفيذ.
              هذا الهدف يغطيه: المحاضرة التفاعلية (SCO 04) + نشاط الأركان (SCO 07).
            </div>
          </div>
        </article>

        <!-- Objective 2: Logical & Algorithmic Thinking -->
        <article class="objective-card stagger-item" data-color="green" tabindex="0"
                 aria-label="الهدف الثاني: استخدام التفكير المنطقي والخوارزمي">
          <div class="obj-header">
            <div class="obj-icon" data-color="green">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" role="img" aria-label="أيقونة المنطق">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="M2 17l10 5 10-5"/>
                <path d="M2 12l10 5 10-5"/>
              </svg>
            </div>
            <div>
              <div class="obj-number" data-color="green" dir="ltr">// TO-02</div>
              <span class="blooms-badge"><span dir="ltr">Apply</span> — تطبيق</span>
            </div>
          </div>
          <h2 class="obj-title">استخدام التفكير المنطقي والخوارزمي لتصميم الحلول</h2>
          <p class="obj-description">
            بناء الحجج المنطقية الصحيحة باستخدام العمليات المنطقية
            <span class="en-term">(AND, OR, NOT)</span>
            وتصميم خوارزميات دقيقة خطوة بخطوة لحل المشكلات.
          </p>
          <button class="reveal-btn" aria-expanded="false" onclick="toggleDetail(this)">
            <span class="arrow" aria-hidden="true">&#9654;</span>
            المزيد من التفاصيل
          </button>
          <div class="obj-detail">
            <div class="obj-detail-content">
              ستتمكن من تقييم الحجج المنطقية وبناء جداول الحقيقة، ثم ترجمة ذلك إلى خوارزميات عملية.
              يغطيه: فيديو التفكير المنطقي (SCO 06) + نشاط المنطق (SCO 08) + نشاط الخوارزمي (SCO 09).
            </div>
          </div>
        </article>

        <!-- Objective 3: Control Algorithm Execution -->
        <article class="objective-card stagger-item" data-color="orange" tabindex="0"
                 aria-label="الهدف الثالث: التحكم في تنفيذ الخوارزميات">
          <div class="obj-header">
            <div class="obj-icon" data-color="orange">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" role="img" aria-label="أيقونة التكرار">
                <polyline points="23 4 23 10 17 10"/>
                <polyline points="1 20 1 14 7 14"/>
                <path d="M3.51 9a9 9 0 0114.85-3.36L23 10"/>
                <path d="M20.49 15a9 9 0 01-14.85 3.36L1 14"/>
              </svg>
            </div>
            <div>
              <div class="obj-number" data-color="orange" dir="ltr">// TO-03</div>
              <span class="blooms-badge"><span dir="ltr">Apply</span> — تطبيق</span>
            </div>
          </div>
          <h2 class="obj-title">التحكم في تنفيذ الخوارزميات باستخدام التكرار والاختيار</h2>
          <p class="obj-description">
            فهم وتطبيق هياكل التحكم —
            التكرار <span class="en-term">(Iteration / Loops)</span>
            والاختيار <span class="en-term">(Selection / If-Else)</span>
            — لبناء خوارزميات أكثر قوة ومرونة.
          </p>
          <button class="reveal-btn" aria-expanded="false" onclick="toggleDetail(this)">
            <span class="arrow" aria-hidden="true">&#9654;</span>
            المزيد من التفاصيل
          </button>
          <div class="obj-detail">
            <div class="obj-detail-content">
              ستتتبع تنفيذ الحلقات التكرارية والجمل الشرطية وتتنبأ بمخرجاتها.
              يغطيه: محاضرة التحكم (SCO 10) + نشاط التكرار (SCO 12) + نشاط الاختيار (SCO 13) + مثال خوارزمي (SCO 14).
            </div>
          </div>
        </article>

        <!-- Objective 4: Evaluate Algorithms -->
        <article class="objective-card stagger-item" data-color="violet" tabindex="0"
                 aria-label="الهدف الرابع: فحص وتقييم الخوارزميات">
          <div class="obj-header">
            <div class="obj-icon" data-color="violet">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" role="img" aria-label="أيقونة التقييم">
                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="15" x2="15" y2="15"/>
                <line x1="12" y1="18" x2="12" y2="12"/>
              </svg>
            </div>
            <div>
              <div class="obj-number" data-color="violet" dir="ltr">// TO-04</div>
              <span class="blooms-badge"><span dir="ltr">Evaluate</span> — تقييم</span>
            </div>
          </div>
          <h2 class="obj-title">فحص وتقييم الخوارزميات للتحقق من صحتها</h2>
          <p class="obj-description">
            اكتشاف الأخطاء الشائعة في الخوارزميات مثل الحلقات اللانهائية
            <span class="en-term">(Infinite Loops)</span>
            وأخطاء الحدود
            <span class="en-term">(Off-by-One Errors)</span>
            واقتراح إصلاحات لها.
          </p>
          <button class="reveal-btn" aria-expanded="false" onclick="toggleDetail(this)">
            <span class="arrow" aria-hidden="true">&#9654;</span>
            المزيد من التفاصيل
          </button>
          <div class="obj-detail">
            <div class="obj-detail-content">
              هذا هو أعلى مستوى في تصنيف بلوم ضمن هذه الوحدة — التقييم.
              ستحلل خوارزميات بها أخطاء متعمدة وتقترح الإصلاحات.
              يغطيه: نقاش الأخطاء الشائعة (SCO 15) + واجب فحص خوارزمية (SCO 16).
            </div>
          </div>
        </article>

      </section>

      <!-- RECALL: Connect to prior knowledge -->
      <section class="recall-section stagger-item" aria-label="ربط بالمعرفة السابقة">
        <div class="callout callout-info" style="display: inline-flex; text-align: right; max-width: 700px;">
          <span class="callout-icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-info)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
          </span>
          <div>
            <p style="font-weight: 600; margin-bottom: var(--space-xs);">هل سبق لك حل لغز خطوة بخطوة؟</p>
            <p class="recall-text" style="font-size: var(--font-size-body-ar); margin: 0;">
              التفكير الحاسوبي هو نفس المنطق الذي تستخدمه يوميًا — لكن بطريقة منظمة. احتفظ بهذه الأهداف كبوصلة لرحلتك التعليمية.
            </p>
          </div>
        </div>
      </section>

      <!-- RETENTION: Next step teaser -->
      <div class="next-hint stagger-item">
        <p>
          <span dir="ltr">// next:</span> خارطة التعلم — تعرف على رحلتك التعليمية الكاملة
        </p>
        <p style="margin-top: var(--space-sm);">
          <span style="color: var(--color-accent);" dir="ltr">&#10003;</span>
          سيتم تسجيل إكمالك تلقائيًا بعد مراجعة المحتوى
        </p>
      </div>

    </main>

  </div>

  <!-- Completion Timer Indicator -->
  <div class="timer-indicator" id="timerIndicator" aria-live="polite">
    <span id="timerText" dir="ltr">0:00 / 0:30</span>
  </div>

  <!-- SCORM API + Behavior Tracker -->
  <script src="../shared/scorm-api.js"></script>
  <script src="../shared/behavior-tracker.js"></script>

  <script>
    (function() {
      'use strict';

      // -------------------------------------------------------
      // SCORM Initialization
      // -------------------------------------------------------
      var scorm = new SCORMWrapper();
      scorm.initialize();

      // Check if already completed (don't re-set to incomplete)
      var currentStatus = scorm.getLessonStatus();
      var alreadyCompleted = (currentStatus === 'completed' || currentStatus === 'passed');

      // Behavior tracking
      var tracker;
      try {
        tracker = new BehaviorTracker(scorm);
        tracker.startSession();
        tracker.trackPageView('sco_01_objectives');
      } catch (e) {
        console.warn('BehaviorTracker not available:', e);
      }

      // -------------------------------------------------------
      // Completion Timer (30 seconds viewing time)
      // -------------------------------------------------------
      var COMPLETION_TIME = 30; // seconds
      var startTime = Date.now();
      var timerEl = document.getElementById('timerText');
      var timerContainer = document.getElementById('timerIndicator');
      var completed = alreadyCompleted;

      if (alreadyCompleted) {
        timerContainer.classList.add('complete');
        timerEl.textContent = 'completed';
        updateProgress(100);
      }

      var timerInterval = setInterval(function() {
        if (completed) {
          clearInterval(timerInterval);
          return;
        }

        var elapsed = Math.floor((Date.now() - startTime) / 1000);
        var remaining = Math.max(0, COMPLETION_TIME - elapsed);
        var minutes = Math.floor(remaining / 60);
        var seconds = remaining % 60;

        timerEl.textContent = formatTime(elapsed) + ' / 0:30';

        // Update progress bar
        var progress = Math.min(100, (elapsed / COMPLETION_TIME) * 100);
        updateProgress(progress);

        if (elapsed >= COMPLETION_TIME && !completed) {
          completed = true;
          scorm.setLessonStatus('completed');
          scorm.setSessionTime(elapsed);
          scorm.commit();

          timerContainer.classList.add('complete');
          timerEl.textContent = 'completed';
          updateProgress(100);

          // Save behavior data
          if (tracker) {
            try { tracker.endSession(); } catch(e) {}
          }
        }
      }, 1000);

      function formatTime(sec) {
        var m = Math.floor(sec / 60);
        var s = sec % 60;
        return m + ':' + (s < 10 ? '0' : '') + s;
      }

      function updateProgress(pct) {
        var progressEl = document.getElementById('progress');
        if (progressEl) {
          progressEl.style.width = pct + '%';
          progressEl.setAttribute('aria-valuenow', Math.round(pct));
        }
      }

      // -------------------------------------------------------
      // Save session time and bookmark on unload
      // -------------------------------------------------------
      window.addEventListener('beforeunload', function() {
        var elapsed = Math.floor((Date.now() - startTime) / 1000);
        scorm.setSessionTime(elapsed);

        // Save suspend data (scroll position for resume)
        try {
          var suspendData = JSON.stringify({
            scrollY: window.scrollY || 0,
            completed: completed
          });
          scorm.setBookmark(suspendData);
        } catch(e) {}

        scorm.commit();
      });

      // -------------------------------------------------------
      // Resume from bookmark
      // -------------------------------------------------------
      try {
        var bookmark = scorm.getBookmark();
        if (bookmark) {
          var data = JSON.parse(bookmark);
          if (data.scrollY) {
            window.scrollTo(0, data.scrollY);
          }
        }
      } catch (e) {
        // Ignore parse errors
      }

    })();

    // -------------------------------------------------------
    // Click-to-reveal detail for objective cards
    // -------------------------------------------------------
    function toggleDetail(btn) {
      var detail = btn.nextElementSibling;
      var isVisible = detail.classList.contains('visible');

      if (isVisible) {
        detail.classList.remove('visible');
        btn.setAttribute('aria-expanded', 'false');
        btn.querySelector('.arrow').style.transform = 'rotate(0deg)';
      } else {
        detail.classList.add('visible');
        btn.setAttribute('aria-expanded', 'true');
        btn.querySelector('.arrow').style.transform = 'rotate(90deg)';
      }
    }
  </script>

</body>
</html>
