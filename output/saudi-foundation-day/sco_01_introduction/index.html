<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>يوم التأسيس السعودي — مقدمة</title>
  <link rel="stylesheet" href="../shared/base.css">
  <link rel="stylesheet" href="../shared/theme.css">
  <link rel="stylesheet" href="../shared/player-shell.css">
  <link rel="stylesheet" href="../shared/course-custom.css">
</head>
<body>

<!-- Skip Navigation for Accessibility -->
<a href="#main-content" class="skip-nav">تخطي إلى المحتوى</a>

<div class="sco-container">

  <!-- ===== TOP NAV BAR ===== -->
  <header class="nav-bar" role="banner">
    <span class="course-title">يوم التأسيس السعودي</span>
    <div class="flex items-center gap-md">
      <div class="progress-bar" style="width:120px;">
        <div class="progress-fill" id="progressFill" style="width:0%"></div>
      </div>
      <div class="points-badge" id="pointsBadge" aria-live="polite">
        <span aria-hidden="true">&#11088;</span>
        <span class="points-count" id="pointsCount">0</span>
        <span>نقطة</span>
      </div>
    </div>
  </header>

  <!-- ===== MAIN CONTENT AREA ===== -->
  <main class="sco-content" id="main-content" role="main">

    <!-- ===== SLIDE 1: Welcome Hero ===== -->
    <div class="slide active" data-slide="0">
      <div class="slide-inner">
        <div class="hero-section saudi-hero text-center">
          <p class="emoji-icon" aria-hidden="true" style="font-size:4rem;">&#127474;&#127480;</p>
          <h1 style="color:white; font-size:2.2rem;">يوم التأسيس السعودي</h1>
          <p style="font-size:1.25rem; color:rgba(255,255,255,0.95); margin-top:var(--space-md);">
            تعال نتعرف معاً على قصة تأسيس وطننا العظيم!
          </p>
          <p style="color:rgba(255,255,255,0.8); font-size:0.95rem; margin-top:var(--space-lg);">
            الدرس الأول — مقدمة عن يوم التأسيس
          </p>
        </div>
        <div class="callout callout-info stagger-item" style="animation-delay:300ms; max-width:700px; margin:var(--space-lg) auto 0;">
          <span class="callout-icon" aria-hidden="true">&#128218;</span>
          <div>
            <strong>ماذا ستتعلم في هذا الدرس؟</strong>
            <p style="margin-top:4px;">ستتعرف على يوم التأسيس، ومتى نحتفل به، ولماذا هو مهم لنا جميعاً.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== SLIDE 2: What is Foundation Day? ===== -->
    <div class="slide" data-slide="1">
      <div class="slide-inner">
        <h2 style="text-align:center;">&#127882; ما هو يوم التأسيس؟</h2>
        <div class="card" style="max-width:750px; margin:var(--space-lg) auto;">
          <p style="font-size:1.15rem; line-height:2;">
            <strong>يوم التأسيس</strong> هو مناسبة وطنية نحتفل بها في
            <strong style="color:var(--color-primary);">22 فبراير</strong>
            من كل عام. في هذا اليوم نتذكر تأسيس
            <strong>الدولة السعودية الأولى</strong>
            على يد الإمام
            <strong style="color:#006C35;">محمد بن سعود</strong>
            عام <strong>1727م</strong> (1139هـ).
          </p>
          <hr class="divider-gradient" style="margin:var(--space-lg) 0;">
          <div class="flex gap-lg justify-center flex-wrap" style="text-align:center;">
            <div class="stagger-item" style="flex:1; min-width:140px;">
              <p class="emoji-icon" aria-hidden="true">&#128197;</p>
              <strong>22 فبراير</strong>
              <p class="text-secondary text-small">تاريخ الاحتفال</p>
            </div>
            <div class="stagger-item" style="flex:1; min-width:140px;">
              <p class="emoji-icon" aria-hidden="true">&#127970;</p>
              <strong>الدرعية</strong>
              <p class="text-secondary text-small">عاصمة التأسيس</p>
            </div>
            <div class="stagger-item" style="flex:1; min-width:140px;">
              <p class="emoji-icon" aria-hidden="true">&#128081;</p>
              <strong>الإمام محمد بن سعود</strong>
              <p class="text-secondary text-small">المؤسس</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== SLIDE 3: Timeline of Key Dates ===== -->
    <div class="slide" data-slide="2">
      <div class="slide-inner align-top">
        <h2 style="text-align:center;">&#128340; رحلة عبر الزمن</h2>
        <p class="text-secondary text-center" style="margin-bottom:var(--space-lg);">تعرف على أهم المحطات في تاريخ المملكة</p>

        <div class="timeline" role="list" aria-label="خط زمني لتاريخ المملكة" style="max-width:700px; margin:0 auto;">
          <div class="timeline-item completed stagger-item" role="listitem">
            <div class="timeline-content">
              <span class="date-badge">1727م</span>
              <h4>تأسيس الدولة السعودية الأولى</h4>
              <p>أسس الإمام محمد بن سعود الدولة السعودية الأولى وعاصمتها الدرعية.</p>
            </div>
          </div>

          <div class="timeline-item completed stagger-item" role="listitem">
            <div class="timeline-content">
              <span class="date-badge">1824م</span>
              <h4>الدولة السعودية الثانية</h4>
              <p>أعاد الإمام تركي بن عبدالله تأسيس الدولة السعودية وجعل الرياض عاصمة لها.</p>
            </div>
          </div>

          <div class="timeline-item completed stagger-item" role="listitem">
            <div class="timeline-content">
              <span class="date-badge">1902م</span>
              <h4>استرداد الرياض</h4>
              <p>استرد الملك عبدالعزيز بن عبدالرحمن الرياض وبدأ توحيد المملكة.</p>
            </div>
          </div>

          <div class="timeline-item active stagger-item" role="listitem">
            <div class="timeline-content">
              <span class="date-badge">1932م</span>
              <h4>توحيد المملكة العربية السعودية</h4>
              <p>أعلن الملك عبدالعزيز توحيد المملكة العربية السعودية في 23 سبتمبر 1932م.</p>
            </div>
          </div>

          <div class="timeline-item stagger-item" role="listitem">
            <div class="timeline-content">
              <span class="date-badge">2022م</span>
              <h4>أول احتفال بيوم التأسيس</h4>
              <p>صدر أمر ملكي باعتماد 22 فبراير يوماً للتأسيس، واحتفلت المملكة لأول مرة!</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== SLIDE 4: Fun Facts — Flip Cards ===== -->
    <div class="slide" data-slide="3">
      <div class="slide-inner">
        <h2 style="text-align:center;">&#129300; هل تعلم؟</h2>
        <p class="text-secondary text-center" style="margin-bottom:var(--space-lg);">اضغط على البطاقات لاكتشاف حقائق ممتعة!</p>

        <div class="fun-grid" style="max-width:800px; margin:0 auto;">

          <!-- Flip Card 1 -->
          <div class="flip-card stagger-item" onclick="this.classList.toggle('flipped'); trackFlipCard(this, 'fc1');"
               role="button" tabindex="0" aria-label="بطاقة: اضغط للاكتشاف"
               onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.classList.toggle('flipped');trackFlipCard(this,'fc1');}">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <p style="font-size:2.5rem;" aria-hidden="true">&#127966;</p>
                <h3 style="color:white; margin:0;">الدرعية</h3>
                <p style="font-size:0.85rem; opacity:0.8; position:absolute; bottom:12px;">اضغط للاكتشاف</p>
              </div>
              <div class="flip-card-back">
                <p style="font-size:1rem; line-height:1.8;">
                  الدرعية كانت عاصمة الدولة السعودية الأولى، وهي اليوم موقع تراث عالمي في اليونسكو!
                </p>
              </div>
            </div>
          </div>

          <!-- Flip Card 2 -->
          <div class="flip-card stagger-item" onclick="this.classList.toggle('flipped'); trackFlipCard(this, 'fc2');"
               role="button" tabindex="0" aria-label="بطاقة: اضغط للاكتشاف"
               onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.classList.toggle('flipped');trackFlipCard(this,'fc2');}">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <p style="font-size:2.5rem;" aria-hidden="true">&#127796;</p>
                <h3 style="color:white; margin:0;">النخلة</h3>
                <p style="font-size:0.85rem; opacity:0.8; position:absolute; bottom:12px;">اضغط للاكتشاف</p>
              </div>
              <div class="flip-card-back">
                <p style="font-size:1rem; line-height:1.8;">
                  النخلة رمز أساسي في شعار المملكة، وتمثل النماء والعطاء والخير الذي تتميز به أرض الجزيرة العربية.
                </p>
              </div>
            </div>
          </div>

          <!-- Flip Card 3 -->
          <div class="flip-card stagger-item" onclick="this.classList.toggle('flipped'); trackFlipCard(this, 'fc3');"
               role="button" tabindex="0" aria-label="بطاقة: اضغط للاكتشاف"
               onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.classList.toggle('flipped');trackFlipCard(this,'fc3');}">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <p style="font-size:2.5rem;" aria-hidden="true">&#9876;&#65039;</p>
                <h3 style="color:white; margin:0;">السيفان</h3>
                <p style="font-size:0.85rem; opacity:0.8; position:absolute; bottom:12px;">اضغط للاكتشاف</p>
              </div>
              <div class="flip-card-back">
                <p style="font-size:1rem; line-height:1.8;">
                  السيفان المتقاطعان في شعار المملكة يرمزان إلى القوة والعدل، وهما من أهم رموز الدولة السعودية.
                </p>
              </div>
            </div>
          </div>

          <!-- Flip Card 4 -->
          <div class="flip-card stagger-item" onclick="this.classList.toggle('flipped'); trackFlipCard(this, 'fc4');"
               role="button" tabindex="0" aria-label="بطاقة: اضغط للاكتشاف"
               onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.classList.toggle('flipped');trackFlipCard(this,'fc4');}">
            <div class="flip-card-inner">
              <div class="flip-card-front">
                <p style="font-size:2.5rem;" aria-hidden="true">&#127758;</p>
                <h3 style="color:white; margin:0;">300 سنة</h3>
                <p style="font-size:0.85rem; opacity:0.8; position:absolute; bottom:12px;">اضغط للاكتشاف</p>
              </div>
              <div class="flip-card-back">
                <p style="font-size:1rem; line-height:1.8;">
                  يوم التأسيس يحتفل بأكثر من 300 سنة من التاريخ السعودي! من الدرعية عام 1727 إلى المملكة الحديثة اليوم.
                </p>
              </div>
            </div>
          </div>
        </div>

        <p class="text-secondary text-center text-small" id="flipProgress" aria-live="polite" style="margin-top:var(--space-lg);">
          اكتشفت 0 من 4 بطاقات
        </p>
      </div>
    </div>

    <!-- ===== SLIDE 5: Lesson Complete ===== -->
    <div class="slide" data-slide="4">
      <div class="slide-inner">
        <div class="completion-message">
          <p style="font-size:4rem;" aria-hidden="true">&#127881;</p>
          <h2>أحسنت! أكملت الدرس الأول</h2>
          <p style="font-size:1.1rem; color:var(--color-text-secondary); margin:var(--space-md) 0 var(--space-lg);">
            تعرفت على يوم التأسيس وأهم المحطات في تاريخ المملكة. هيا ننتقل للدرس التالي!
          </p>
          <div class="badge-earned">
            <span aria-hidden="true">&#127942;</span>
            <span>حصلت على وسام: مستكشف التأسيس</span>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- ===== BOTTOM NAVIGATION ===== -->
  <nav class="sco-nav" role="navigation" aria-label="تنقل الدرس">
    <button class="btn-prev" id="prevBtn" disabled data-next-text="السابق">السابق</button>
    <span class="page-indicator" id="pageIndicator" aria-live="polite">1 / 5</span>
    <button class="btn-next" id="nextBtn" data-next-text="التالي" data-complete-text="إنهاء الدرس">التالي</button>
  </nav>

</div>

<!-- ===== SCRIPTS ===== -->
<script src="../shared/scorm-api.js"></script>
<script src="../shared/engine/slide-controller.js"></script>

<script>
/* ============================================================
   SCO 01: Introduction — يوم التأسيس السعودي
   ============================================================ */

/* --- SCORM Initialization --- */
var scorm = new SCORMWrapper();
scorm.initialize();

/* --- Points System --- */
var totalPoints = 0;

function addPoints(amount) {
  totalPoints += amount;
  var el = document.getElementById('pointsCount');
  if (el) {
    el.textContent = totalPoints;
    /* Animate the badge */
    var badge = document.getElementById('pointsBadge');
    if (badge) {
      badge.classList.add('glow');
      setTimeout(function() { badge.classList.remove('glow'); }, 600);
    }
  }
}

/* --- Flip Card Tracking --- */
var flippedCards = {};

function trackFlipCard(card, id) {
  if (!flippedCards[id]) {
    flippedCards[id] = true;
    addPoints(5);
    updateFlipProgress();
  }
}

function updateFlipProgress() {
  var count = Object.keys(flippedCards).length;
  var el = document.getElementById('flipProgress');
  if (el) el.textContent = 'اكتشفت ' + count + ' من 4 بطاقات';
  if (count === 4) {
    addPoints(10);
    el.innerHTML = '&#127881; اكتشفت جميع البطاقات! +10 نقاط إضافية';
  }
}

/* --- Confetti Animation --- */
function launchConfetti() {
  var colors = ['#3B82F6', '#10B981', '#F59E0B', '#EC4899', '#006C35', '#8B5CF6'];
  for (var i = 0; i < 40; i++) {
    var piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random() * 100 + 'vw';
    piece.style.background = colors[Math.floor(Math.random() * colors.length)];
    piece.style.width = (Math.random() * 8 + 6) + 'px';
    piece.style.height = (Math.random() * 8 + 6) + 'px';
    piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    piece.style.animation = 'confetti-fall ' + (Math.random() * 2 + 1.5) + 's ease-out forwards';
    piece.style.animationDelay = (Math.random() * 0.5) + 's';
    document.body.appendChild(piece);
    /* Clean up after animation */
    (function(p) {
      setTimeout(function() { if (p.parentNode) p.parentNode.removeChild(p); }, 4000);
    })(piece);
  }
}

/* --- Slide Controller --- */
var controller = new SlideController({
  onSlideChange: function(index, total) {
    /* Award points for advancing */
    addPoints(5);
  },
  onComplete: function() {
    /* Lesson complete */
    addPoints(20);
    launchConfetti();

    /* SCORM: Set lesson status to completed */
    if (scorm && scorm.initialized) {
      scorm.setLessonStatus('completed');
      scorm.setScore(100, 100, 0);
      scorm.commit();
    }
  }
});

/* --- Session Start Time --- */
var sessionStart = new Date();

/* --- SCORM Terminate on page unload --- */
window.addEventListener('beforeunload', function() {
  if (scorm && scorm.initialized) {
    /* Calculate session time in seconds */
    var elapsed = Math.floor((new Date() - sessionStart) / 1000);
    scorm.setSessionTime(elapsed);
    scorm.commit();
    scorm.terminate();
  }
});
</script>

</body>
</html>
